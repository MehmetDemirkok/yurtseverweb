# Yurtsever Konaklama YÃ¶netim Sistemi - Cursor Rules

## ğŸ—ï¸ Proje Genel BakÄ±ÅŸ
Bu proje, Next.js 15.3.3 tabanlÄ±, TypeScript ile geliÅŸtirilmiÅŸ, Ã§ok kiracÄ±lÄ± (multi-tenant) bir konaklama ve transfer yÃ¶netim sistemidir. TÃ¼rkÃ§e dil desteÄŸi ile geliÅŸtirilmiÅŸtir.

## ğŸ› ï¸ Teknoloji Stack
- **Frontend**: Next.js 15.3.3, React 19, TypeScript 5
- **Backend**: Next.js API Routes
- **VeritabanÄ±**: PostgreSQL (Prisma ORM 6.11.1)
- **Styling**: Tailwind CSS 4, Radix UI, Material-UI
- **Kimlik DoÄŸrulama**: JWT
- **Harita**: Leaflet, React-Leaflet
- **Excel**: ExcelJS, XLSX
- **Grafikler**: Recharts
- **Form**: React Hook Form
- **State Management**: React useState/useEffect
- **Deployment**: Vercel

## ğŸ“ Proje YapÄ±sÄ± KurallarÄ±

### Dosya Organizasyonu
```
src/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/                   # Kimlik doÄŸrulama sayfalarÄ±
â”‚   â”œâ”€â”€ (dashboard)/              # Ana uygulama sayfalarÄ±
â”‚   â”œâ”€â”€ (admin)/                  # Admin paneli
â”‚   â”œâ”€â”€ api/                      # API Routes
â”‚   â””â”€â”€ components/               # Sayfa Ã¶zel componentleri
â”œâ”€â”€ components/                   # Shared Components
â”‚   â”œâ”€â”€ ui/                       # UI Components (Radix UI tabanlÄ±)
â”‚   â”œâ”€â”€ layout/                   # Layout Components
â”‚   â””â”€â”€ forms/                    # Form Components
â”œâ”€â”€ lib/                          # Utility Libraries
â”‚   â”œâ”€â”€ utils/                    # Utility Functions
â”‚   â”œâ”€â”€ constants/                # Constants
â”‚   â”œâ”€â”€ validations/              # Validation Schemas
â”‚   â”œâ”€â”€ auth.ts                   # Authentication
â”‚   â”œâ”€â”€ permissions.ts            # Permissions
â”‚   â””â”€â”€ prisma.ts                 # Database
â””â”€â”€ types/                        # TypeScript Types
```

### Component Naming Conventions
- **Sayfa Componentleri**: PascalCase, `Page` suffix (Ã¶rn: `CarilerPage`)
- **UI Componentleri**: PascalCase (Ã¶rn: `Button`, `Card`, `Input`)
- **Layout Componentleri**: PascalCase, `Layout` suffix (Ã¶rn: `SidebarLayout`)
- **Modal Componentleri**: PascalCase, `Modal` suffix (Ã¶rn: `AccommodationFormModal`)

## ğŸ” Kimlik DoÄŸrulama ve Yetkilendirme

### KullanÄ±cÄ± Rolleri
- **ADMIN**: Sistem sahibi, tÃ¼m yetkilere sahip
- **MUDUR**: Åirket mÃ¼dÃ¼rÃ¼, kendi ÅŸirketini yÃ¶netir
- **OPERATOR**: Veri giriÅŸi yapabilir
- **KULLANICI**: Sadece gÃ¶rÃ¼ntÃ¼leme yetkisi

### GÃ¼venlik KurallarÄ±
- Her API isteÄŸinde JWT token doÄŸrulanmalÄ±
- Åirket bazlÄ± veri izolasyonu zorunlu
- Rol bazlÄ± eriÅŸim kontrolÃ¼ (RBAC) uygulanmalÄ±
- Hassas veriler environment variables'da saklanmalÄ±

## ğŸ—„ï¸ VeritabanÄ± KurallarÄ±

### Prisma Schema KurallarÄ±
- TÃ¼m modellerde `companyId` alanÄ± zorunlu (multi-tenant)
- Enum deÄŸerleri TÃ¼rkÃ§e olmalÄ± (Ã¶rn: `AKTIF`, `PASIF`)
- Ä°liÅŸkiler `onDelete: Cascade` ile tanÄ±mlanmalÄ±
- Timestamp alanlarÄ± (`createdAt`, `updatedAt`) zorunlu
- Soft delete yerine `durum` enum'u kullanÄ±lmalÄ±

### Model Naming Conventions
- TÃ¼rkÃ§e model isimleri kullanÄ±lmalÄ± (Ã¶rn: `Cari`, `Tedarikci`)
- Ä°ngilizce field isimleri kullanÄ±lmalÄ± (Ã¶rn: `createdAt`, `updatedAt`)
- Enum isimleri PascalCase (Ã¶rn: `CariDurum`, `TransferDurum`)

## ğŸŒ API KurallarÄ±

### API Route YapÄ±sÄ±
```
/api/
â”œâ”€â”€ auth/                         # Kimlik doÄŸrulama
â”œâ”€â”€ user/                         # KullanÄ±cÄ± iÅŸlemleri
â”œâ”€â”€ accommodation/                # Konaklama
â”œâ”€â”€ konaklama/                    # Konaklama modÃ¼lÃ¼
â”œâ”€â”€ moduller/                     # ModÃ¼ller
â”‚   â””â”€â”€ transfer/                 # Transfer modÃ¼lÃ¼
â”œâ”€â”€ arvento/                      # Arvento entegrasyonu
â””â”€â”€ admin/                        # Admin iÅŸlemleri
```

### API Response Format
```typescript
interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: string;
  message?: string;
}
```

### Error Handling
- TÃ¼m API'lerde try-catch kullanÄ±lmalÄ±
- Hata mesajlarÄ± TÃ¼rkÃ§e olmalÄ±
- HTTP status kodlarÄ± doÄŸru kullanÄ±lmalÄ±
- Validation hatalarÄ± detaylÄ± dÃ¶ndÃ¼rÃ¼lmeli

## ğŸ¨ UI/UX KurallarÄ±

### Styling KurallarÄ±
- **Primary**: Tailwind CSS kullanÄ±lmalÄ±
- **UI Components**: Radix UI tabanlÄ± componentler
- **Icons**: Lucide React kullanÄ±lmalÄ±
- **Responsive**: Mobile-first yaklaÅŸÄ±m
- **Dark Mode**: next-themes ile desteklenmeli

### Component KurallarÄ±
- Her component TypeScript ile yazÄ±lmalÄ±
- Props interface'leri tanÄ±mlanmalÄ±
- Error boundary'ler kullanÄ±lmalÄ±
- Loading state'leri gÃ¶sterilmeli
- Accessibility (a11y) standartlarÄ± uygulanmalÄ±

### Form KurallarÄ±
- Form validation zorunlu
- Error mesajlarÄ± TÃ¼rkÃ§e olmalÄ±
- Loading state'leri gÃ¶sterilmeli
- Success feedback verilmeli

## ğŸ“Š Veri YÃ¶netimi KurallarÄ±

### State Management
- React useState/useEffect kullanÄ±lmalÄ±
- Global state iÃ§in Context API
- Server state iÃ§in SWR veya React Query
- Optimistic updates uygulanmalÄ±

### Data Fetching
- API calls iÃ§in axios kullanÄ±lmalÄ±
- Error handling zorunlu
- Loading states gÃ¶sterilmeli
- Cache stratejileri uygulanmalÄ±

## ğŸ”§ Development KurallarÄ±

### Code Quality
- **ESLint**: Next.js core-web-vitals config
- **TypeScript**: Strict mode aktif
- **Prettier**: Code formatting
- **Git Hooks**: Pre-commit hooks

### Performance
- **Image Optimization**: Next.js Image component
- **Code Splitting**: Dynamic imports
- **Bundle Analysis**: Webpack bundle analyzer
- **Caching**: API response caching

### Testing
- **Unit Tests**: Jest + React Testing Library
- **Integration Tests**: API route testing
- **E2E Tests**: Playwright (opsiyonel)

## ğŸŒ Dil ve Lokalizasyon

### TÃ¼rkÃ§e Dil KurallarÄ±
- TÃ¼m kullanÄ±cÄ± arayÃ¼zÃ¼ metinleri TÃ¼rkÃ§e olmalÄ±
- Error mesajlarÄ± TÃ¼rkÃ§e olmalÄ±
- Success mesajlarÄ± TÃ¼rkÃ§e olmalÄ±
- Form validation mesajlarÄ± TÃ¼rkÃ§e olmalÄ±

### Tarih ve Saat FormatlarÄ±
- TÃ¼rkiye timezone (Europe/Istanbul) kullanÄ±lmalÄ±
- Tarih formatÄ±: `dd.MM.yyyy`
- Saat formatÄ±: `HH:mm`
- `date-fns` kÃ¼tÃ¼phanesi kullanÄ±lmalÄ±

## ğŸ“ˆ Raporlama ve Export

### Excel Export KurallarÄ±
- ExcelJS kÃ¼tÃ¼phanesi kullanÄ±lmalÄ±
- TÃ¼rkÃ§e baÅŸlÄ±klar kullanÄ±lmalÄ±
- Tarih formatlarÄ± TÃ¼rkÃ§e standartlara uygun
- Dosya isimleri TÃ¼rkÃ§e olmalÄ±

### Grafik ve Ä°statistikler
- Recharts kÃ¼tÃ¼phanesi kullanÄ±lmalÄ±
- Responsive grafikler
- TÃ¼rkÃ§e etiketler
- Color scheme tutarlÄ± olmalÄ±

## ğŸš€ Deployment ve Production

### Environment Variables
```env
# VeritabanÄ±
DATABASE_URL="postgresql://..."
DIRECT_URL="postgresql://..."

# JWT
JWT_SECRET="your_secret_key"

# API Keys
ARVENTO_API_KEY="..."
GOOGLE_PLACES_API_KEY="..."
```

### Build ve Deploy
- **Build Command**: `npm run build`
- **Start Command**: `npm start`
- **Environment**: Vercel
- **Database**: PostgreSQL (Supabase/PlanetScale)

## ğŸ” Debugging ve Logging

### Logging KurallarÄ±
- Console.log yerine structured logging
- Error logging zorunlu
- Performance monitoring
- User action logging

### Debug Tools
- React Developer Tools
- Prisma Studio
- Network tab monitoring
- Error boundary logging

## ğŸ“ Documentation

### Code Documentation
- JSDoc comments zorunlu
- README dosyalarÄ± gÃ¼ncel tutulmalÄ±
- API documentation
- Component documentation

### Git Commit Messages
- Conventional commits kullanÄ±lmalÄ±
- TÃ¼rkÃ§e commit mesajlarÄ±
- Issue number referanslarÄ±

## ğŸ§ª Testing Stratejisi

### Test Coverage
- **Unit Tests**: %80+ coverage
- **Integration Tests**: API routes
- **Component Tests**: UI components
- **E2E Tests**: Critical user flows

### Test Naming
- Test dosyalarÄ±: `*.test.ts` veya `*.spec.ts`
- Test isimleri aÃ§Ä±klayÄ±cÄ± olmalÄ±
- TÃ¼rkÃ§e test aÃ§Ä±klamalarÄ±

## ğŸ”„ Code Review Checklist

### Genel Kontroller
- [ ] TypeScript strict mode uyumlu
- [ ] ESLint kurallarÄ± geÃ§iyor
- [ ] TÃ¼rkÃ§e dil desteÄŸi
- [ ] Responsive design
- [ ] Accessibility standartlarÄ±
- [ ] Performance optimizasyonu
- [ ] Security best practices
- [ ] Error handling
- [ ] Loading states
- [ ] Success feedback

### API Kontrolleri
- [ ] JWT authentication
- [ ] Company-based data isolation
- [ ] Role-based access control
- [ ] Input validation
- [ ] Error responses
- [ ] HTTP status codes

### UI Kontrolleri
- [ ] Component reusability
- [ ] Props interface
- [ ] Error boundaries
- [ ] Loading states
- [ ] Form validation
- [ ] Mobile responsiveness

## ğŸš¨ Ã–nemli Notlar

1. **TÃ¼rkÃ§e Dil DesteÄŸi**: TÃ¼m kullanÄ±cÄ± arayÃ¼zÃ¼ TÃ¼rkÃ§e olmalÄ±
2. **Multi-Tenant**: Her veri kaydÄ±nda companyId zorunlu
3. **Security First**: JWT ve RBAC her zaman aktif
4. **Performance**: Lazy loading ve caching kullanÄ±lmalÄ±
5. **Accessibility**: WCAG standartlarÄ± uygulanmalÄ±
6. **Mobile First**: Responsive design zorunlu
7. **Error Handling**: KullanÄ±cÄ± dostu hata mesajlarÄ±
8. **Documentation**: Kod dokÃ¼mantasyonu gÃ¼ncel tutulmalÄ±

Bu kurallar, projenin tutarlÄ±, gÃ¼venli ve sÃ¼rdÃ¼rÃ¼lebilir olmasÄ±nÄ± saÄŸlar.
